@model MindSageWeb.Repositories.Models.GetCourseDetailRespond

<div class="grid-block vertical">
    <img class="grid-block" src="@Model.ImageUrl">
    <br />
    <div class="grid-block">
        <div class="small-5 grid-block align-center">
            <div class="small-4 grid-block vertical">
                <div class="card">
                    <div class="card-section">
                        <h2>@Model.Name</h2>
                        <h4>@Model.Price.ToString("C2")</h4>
                        @{
                            var isAlreadyHaveThisCourse = (bool)ViewBag.IsAlreadyHaveThisCourse;
                            if (isAlreadyHaveThisCourse)
                            {
                                <a asp-action="entercourse" asp-controller="my" asp-route-id="@Model.id" class="button expand large">Go to my course</a>
                            }
                            else if (User.Identity.IsAuthenticated)
                            {
                                <a class="button expand large" zf-open="purchaseModal">PURCHASE</a>
                            }
                            else
                            {
                                <a class="button primary large-centered" asp-controller="Account" asp-action="Login" asp-route-ReturnUrl="@Url.Action("detail", "home", new { @id = Model.id })">PURCHASE</a>
                            }
                        }
                    </div>
                </div>
                @foreach (var item in Model.RelatedCourses)
                {
                    <div class="card-section">
                        <h2>@item.Name</h2>
                        <a asp-action="detail" asp-controller="home" asp-route-id="@item.CourseId" class="button expand">VIEW</a>
                    </div>
                }
            </div>
        </div>
        <div class="small-6 grid-block vertical">
            <div class="grid-block vertical">
                <p class="detail-info">@Model.Name</p>
                <hr>
                <h1 class="detail-header">@Model.Title</h1>
                <p>
                    @Model.Description
                </p>
                <h2 class="detail-header">@Model.TotalWeeks Week Courses <img class="float-right" src="@Model.DescriptionImageUrl"></h2>

                @foreach (var semester in Model.Semesters)
                {
                    <h1 class="lesson-header">@semester.Name</h1>
                    <div class="card">
                        <div class="card-section">
                            <h1>INTRO</h1>
                            <h2>@semester.Title</h2>
                            <p>@semester.TotalWeeks Weeks</p>
                            <p>
                                @semester.Description
                            </p>
                            <zf-accordion auto-open="false" collapsible="true" multi-open="true">
                                <zf-accordion-item title="> More detail">
                                    @foreach (var unit in semester.Units)
                                    {
                                        foreach (var lesson in unit.Lessons)
                                        {
                                            <div class="card-section">
                                                <p>WEEK @lesson.Order</p>
                                                @foreach (var content in lesson.Contents)
                                                {
                                                    <div class="grid-block">
                                                        <div class="grid-content shrink large-2">
                                                            <img src="@content.ImageUrl">
                                                        </div>
                                                        <div class="grid-content large-10">
                                                            <p>
                                                                @content.Description
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <br />
                                                }
                                            </div>
                                        }
                                    }
                                </zf-accordion-item>
                            </zf-accordion>
                        </div>
                    </div>

                    @foreach (var unit in semester.Units)
                    {
                        <div class="card">
                            <div class="card-section">
                                <h2>UNIT @unit.UnitNo</h2>
                                <h3>@unit.Title</h3>
                                <p class="week-info">@unit.TotalWeeks Weeks</p>
                                <p>
                                    @unit.Description
                                </p>
                                <zf-accordion auto-open="false" collapsible="true" multi-open="true">
                                    <zf-accordion-item title="> More detail">
                                        @foreach (var lesson in unit.Lessons)
                                        {
                                            <div class="card-section">
                                                <p>WEEK @lesson.Order</p>
                                                @foreach (var content in lesson.Contents)
                                                {
                                                <div class="grid-block">
                                                    <div class="grid-content shrink large-2">
                                                        <img src="@content.ImageUrl">
                                                    </div>
                                                    <div class="grid-content large-10">
                                                        <p>
                                                            @content.Description
                                                        </p>
                                                    </div>
                                                </div>
                                                <br />
                                                }
                                            </div>
                                        }
                                    </zf-accordion-item>
                                </zf-accordion>
                            </div>
                        </div>
                    }
                } 
            </div>
        </div>
    </div>
</div>

<div zf-modal="" id="purchaseModal">
    <a zf-close="" class="close-button">x</a>
    <h4 class="text-center">COMPLETE PAYMENT</h4>
    <div class="grid-block">
        <div class="medium-10 large-10 grid-container" ng-init="purchaseMethod = 'Paypal'">
            <input type="radio" ng-model="purchaseMethod" name="payment" value="Paypal" id="Paypal"><label for="Paypal">Pay with Paypal</label>
            <form asp-controller="Purchase" asp-action="UserCode" method="post" class="navbar-right">
                @Html.Hidden("grade", Model.Grade)
                @Html.Hidden("courseId", Model.id)
                <input type="radio" ng-model="purchaseMethod" name="payment" value="Code" id="Code"><label for="Code">Use Key Code</label>
                <input name="id" type="text" />
                <div class="text-center">
                    <button ng-show="purchaseMethod == 'Code'" type="submit" class="button large text-center">PURCHASE</button>
                    <a asp-controller="purchase" asp-action="index" asp-route-id="@Model.id" ng-show="purchaseMethod == 'Paypal'" class="button large text-center">GO</a>
                </div>
            </form>
        </div>
    </div>
</div>